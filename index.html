<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Comprotocol : A very basic communication protocol used for education purpose.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Comprotocol</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/bigz94/comprotocol">View on GitHub</a>

          <h1 id="project_title">Comprotocol</h1>
          <h2 id="project_tagline">A very basic communication protocol used for education purpose.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/bigz94/comprotocol/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/bigz94/comprotocol/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="protokoll-beschreibung-comprotocol" class="anchor" href="#protokoll-beschreibung-comprotocol"><span class="octicon octicon-link"></span></a>Protokoll Beschreibung (comprotocol)</h1>

<h1></h1>

<p>Ein sehr einfach gehaltenes Kommunikationsprotokoll. Das Protokoll wird für schulische Zwecke genutzt und dient zum lernen.</p>

<p>code api</p>

<h2>
<a name="protokoll-aufbau" class="anchor" href="#protokoll-aufbau"><span class="octicon octicon-link"></span></a>Protokoll Aufbau</h2>

<p>Des Prtokoll ist wie folgt aufgebaut:</p>

<ol>
<li>Entweder kann man einfach einen Command senden</li>
</ol><table>
<thead><tr>
<th align="right"></th>
<th align="center">1 Byte</th>
</tr></thead>
<tbody>
<tr>
<td align="right">1</td>
<td align="center">initialisierung</td>
</tr>
<tr>
<td align="right">2</td>
<td align="center">Ziel ID</td>
</tr>
<tr>
<td align="right">3</td>
<td align="center">Source ID</td>
</tr>
<tr>
<td align="right">4</td>
<td align="center">command (max 127)</td>
</tr>
<tr>
<td align="right">5</td>
<td align="center">Checksumme</td>
</tr>
</tbody>
</table><ol>
<li>Oder einen Text übermitteln</li>
</ol><table>
<thead><tr>
<th align="right"></th>
<th align="center">1 Byte</th>
</tr></thead>
<tbody>
<tr>
<td align="right">1</td>
<td align="center">Initialisierung</td>
</tr>
<tr>
<td align="right">2</td>
<td align="center">Ziel ID</td>
</tr>
<tr>
<td align="right">3</td>
<td align="center">Source ID</td>
</tr>
<tr>
<td align="right">4</td>
<td align="center">command(text) + textlänge</td>
</tr>
<tr>
<td align="right">5</td>
<td align="center">TEXT (max 128byte)</td>
</tr>
<tr>
<td align="right">6</td>
<td align="center">Checksumme</td>
</tr>
</tbody>
</table><h3>
<a name="keine-%C3%9Cbermittlung" class="anchor" href="#keine-%C3%9Cbermittlung"><span class="octicon octicon-link"></span></a>Keine Übermittlung</h3>

<p>Bei keiner Überittlung wird die Verbindung immer auf 1 gehalten.
Wichtig beim lesen und schreiben von Nachrichten muss dieser Wert umgekehrt (1 auf 0) gesetzt werden.
Bei dieser Dokumentation wird davon ausgegangen, dass das ausgehende oder eingehende Byte bereits umgekehrt, also 0 bei keinem Senden erhält.</p>

<h3>
<a name="initialisierunginitialisierung" class="anchor" href="#initialisierunginitialisierung"><span class="octicon octicon-link"></span></a>Initialisierung(#Initialisierung)</h3>

<p>Um zu erkennen, dass eine Nachricht übermittelt wird, wird ein Initialisierungs Byte genutzt.
Dieses muss immer <strong>1010 1010</strong> betragen. Dies wird einheitlich bei allen Kontrollern, die dieses Protokoll nutzen.</p>

<h3>
<a name="ziel-id" class="anchor" href="#ziel-id"><span class="octicon octicon-link"></span></a>Ziel ID</h3>

<p>Die Ziel ID ist eine 1 Byte grosse Zahl, die genutzt wird um zu erkennen, an wen man die Nachticht senden möchte.</p>

<h3>
<a name="source-id" class="anchor" href="#source-id"><span class="octicon octicon-link"></span></a>Source ID</h3>

<p>Die Source ID wird genutzt um zu erkenne, von wem die Nachricht ist und an wen man antworten sollte, sollte eine Antwort benötigt werden.</p>

<h3>
<a name="command-%C3%BCbermitteln" class="anchor" href="#command-%C3%BCbermitteln"><span class="octicon octicon-link"></span></a>Command übermitteln</h3>

<p>Beim Command übermitteln wird bei dem command byte(4) das erste byte auf 0 gesetzt. Die restlichen können zur übermittlung des Commands genutzt werden.</p>

<h4>
<a name="kurze-command-list" class="anchor" href="#kurze-command-list"><span class="octicon octicon-link"></span></a>Kurze Command list</h4>

<p>Hier eine kurze liste der haupt commands. Das Protokoll wurde dafür gebaut, damit man jederzeit eigene commands hinzufügen kann.</p>

<table>
<thead><tr>
<th>byte</th>
<th>name</th>
</tr></thead>
<tbody>
<tr>
<td>000 0001</td>
<td>Okey</td>
</tr>
<tr>
<td>000 0010</td>
<td>Fehler: Neu senden</td>
</tr>
</tbody>
</table><h3>
<a name="text-%C3%BCbermitteln" class="anchor" href="#text-%C3%BCbermitteln"><span class="octicon octicon-link"></span></a>Text übermitteln</h3>

<p>Beim Übermitteln eines Textes wird beim command byte(4) des erste byte auf 1 gesetzt und die restlichen bytes dafür genutzt, um die grösse der kommenden Nachricht zu übermitteln.</p>

<h3>
<a name="checksum" class="anchor" href="#checksum"><span class="octicon octicon-link"></span></a>Checksum</h3>

<p>Benörigt um die erhaltenen bytes zu kontrollieren. Die checksumme ermöglicht es zu erkennen, ob ein fehler bei der Übermittlung entschaden ist.</p>

<p>Die Checksumme wird erstellt indem man alle zuvor gesendeten bytes XOR miteinander verknüpft.</p>

<h2>
<a name="structure-chart" class="anchor" href="#structure-chart"><span class="octicon octicon-link"></span></a>Structure chart</h2>

<p>Das <em>structure chart</em> aller Funktionen:</p>

<p><img src="./images/Comprotocol_structurechart.png" alt="alt text" title="structure chart"></p>

<h2>
<a name="funktionen-struktugram" class="anchor" href="#funktionen-struktugram"><span class="octicon octicon-link"></span></a>Funktionen Struktugram</h2>

<p>Alle Struktogramme:</p>

<h3>
<a name="f_co_initializeoverflowinterrupt" class="anchor" href="#f_co_initializeoverflowinterrupt"><span class="octicon octicon-link"></span></a>f_co_initializeOverflowInterrupt</h3>

<p><img src="./images/strg/f_co_initializeOverlowInterrupt.PNG" alt="f_co_initializeOverflowInterrupt" title="f_co_initializeOverflowInterrupt"></p>

<h3>
<a name="f_co_send" class="anchor" href="#f_co_send"><span class="octicon octicon-link"></span></a>f_co_send</h3>

<p><img src="./images/strg/f_co_send.PNG" alt="f_co_send" title="f_co_send"></p>

<h3>
<a name="f_co_sendtext" class="anchor" href="#f_co_sendtext"><span class="octicon octicon-link"></span></a>f_co_sendText</h3>

<p><img src="./images/strg/f_co_sendText.PNG" alt="f_co_sendText" title="f_co_sendText"></p>

<h3>
<a name="f_co_sendbyte" class="anchor" href="#f_co_sendbyte"><span class="octicon octicon-link"></span></a>f_co_sendByte</h3>

<p><img src="./images/strg/f_co_sendByte.PNG" alt="f_co_sendByte" title="f_co_sendByte"></p>

<h3>
<a name="f_co_sendbit" class="anchor" href="#f_co_sendbit"><span class="octicon octicon-link"></span></a>f_co_sendBit</h3>

<p><img src="./images/strg/f_co_sendBit.PNG" alt="f_co_sendBit" title="f_co_sendBit"></p>

<h3>
<a name="f_co_init_waitmode" class="anchor" href="#f_co_init_waitmode"><span class="octicon octicon-link"></span></a>f_co_init_waitmode</h3>

<p><img src="./images/strg/f_co_init_waitmode.PNG" alt="f_co_init_waitmode" title="f_co_init_waitmode"></p>

<h3>
<a name="f_co_update" class="anchor" href="#f_co_update"><span class="octicon octicon-link"></span></a>f_co_update</h3>

<p><img src="./images/strg/f_co_update.PNG" alt="f_co_init_waitmode" title="f_co_update"></p>

<h3>
<a name="f_co_processbyte" class="anchor" href="#f_co_processbyte"><span class="octicon octicon-link"></span></a>f_co_processbyte</h3>

<p><img src="./images/strg/f_co_processbyte.PNG" alt="f_co_processbyte" title="f_co_processbyte"></p>

<h2>
<a name="api" class="anchor" href="#api"><span class="octicon octicon-link"></span></a>API</h2>

<p>Die Funktionsbeschreibungen und Dokumentation ist unter folgendem link zu finden:
<a href="http://bigz94.github.io/comprotocol/doc/doxy/html/co_8h.html">http://bigz94.github.io/comprotocol/doc/doxy/html/index.html</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Comprotocol maintained by <a href="https://github.com/bigz94">bigz94</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
